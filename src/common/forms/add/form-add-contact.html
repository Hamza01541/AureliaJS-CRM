<template>
    <div>
        <h2>Add contact</h2>
        <div>
            <h3>Account Information</h3>
            <div >
                <input 
                    type="text"
                    value.bind="form.name.content"
                    class.bind="form.name.isInvalid && form.name.isInvalid ? 'invalid' : ''"
                    focusout.trigger="validateField('name')"
                >
                <select if.bind="currentState[0] > 'A'" value.bind="form.customer.content" change.delegate="goBackToCustomer() chooseCustomer()"
                    disabled.bind="form.customer.isDisabled">
                    <option model.bind="''">Choose...</option>
                    <option repeat.for="customer of form.customer.options" model.bind="customer">
                        ${customer.accountName}
                    </option>
                </select>
                <input 
                    type="text" 
                    value.bind="form.email.content" 
                    class.bind="form.email.isInvalid ? 'invalid' : ''"
                    focusout.trigger="validateField('email')"
                >
                <div>
                    <input 
                        type="text" 
                        value.bind="form.phone1.content" 
                        class.bind="form.phone1.isInvalid ? 'invalid' : ''"
                        focusout.trigger="validateField('phone1')"
                    >
                    <button click.trigger="addPhoneField()">+</button>
                </div>
                <div if.bind="!form.phone2.isExcluded">
                    <input 
                        type="text" 
                        value.bind="form.phone2.content" 
                        class.bind="form.phone2.isInvalid ? 'invalid' : ''"
                        focusout.trigger="validateField('phone2')"
                    >
                    <button click.trigger="removePhoneField2()">-</button>
                </div>
                <div if.bind="!form.phone3.isExcluded">
                    <input 
                        type="text" 
                        value.bind="form.phone3.content" 
                        class.bind="form.phone3.isInvalid ? 'invalid' : ''"
                        focusout.trigger="validateField('phone3')"
                    >
                    <button click.trigger="removePhoneField3()">-</button>
                </div>
                <input 
                    type="text" 
                    value.bind="form.department.content" 
                    class.bind="form.department.isInvalid ? 'invalid' : ''"
                    focusout.trigger="validateField('department')"
                >
                <input 
                    type="text" 
                    value.bind="form.position.content" 
                    class.bind="form.position.isInvalid ? 'invalid' : ''"
                    focusout.trigger="validateField('position')"
                >
            </div>

            <h3>Billing Address</h3>
            <div>
                <input
                    type="text" 
                    value.bind="form.street.content" 
                    class.bind="form.street.isInvalid ? 'invalid' : ''"
                    focusout.trigger="validateField('street')"
                >
                <input 
                    type="text" 
                    value.bind="form.zipCode.content" 
                    class.bind="form.zipCode.isInvalid ? 'invalid' : ''"
                    focusout.trigger="validateField('zipCode')"
                >
                <input 
                    type="text" 
                    value.bind="form.city.content" 
                    class.bind="form.city.isInvalid ? 'invalid' : ''"
                    focusout.trigger="validateField('city')"
                >
                <input 
                    type="text" 
                    value.bind="form.country.content" 
                    class.bind="form.country.isInvalid ? 'invalid' : ''"
                    focusout.trigger="validateField('country')"
                >
                <input 
                    type="textarea" 
                    disabled.bind="!isEditing"
                    value.bind="form.description.content"
                    class.bind="form.description.isInvalid ? 'invalid' : ''"
                >
                <input 
                    type="text" 
                    value.bind="form.region.content" 
                    class.bind="form.region.isInvalid ? 'invalid' : ''"
                    focusout.trigger="validateField('region')"
                >
                <input 
                    type="textarea" 
                    value.bind="form.description.content"
                    class.bind="form.description.isInvalid ? 'invalid' : ''"
                >
            </div>

            <button click.trigger="runValidation() submitIfValid()">Save</button>
        </div>
    </div>
</template>